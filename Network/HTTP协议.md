# HTTP协议

## 1 URI统一资源标识符

### 1.1 什么是URI

- **URL**：Uniform Resource Locator，表示资源的位置， 期望提供查找资源的方法
- **URN**：Uniform Resource Name，期望为资源提供持久 的、位置无关的标识方式，并允许简单地将多个命名空间映射到单个URN命名 空间
  - 例如磁力链接 magnet:?xt=urn:sha1:YNCKHTQC5C 
- **URI**：Uniform Resource Identifier，用以区分资源，是 URL 和 URN 的超集，用以取代 URL 和 URN 概念



严格地说，URI 不完全等同于网址，它包含有 URL 和 URN两个部分，在 HTTP 世界里用的网址实际上是 URL——统一资源定位符（Uniform Resource Locator）。但因为URL 实在是太普及了，所以常常把这两者简单地视为相等。

### 1.2 URI的组成

![](http://base422.oss-cn-beijing.aliyuncs.com/neturi2.png)



- URI 通常由 scheme、host:port、path 和 query 四个部分组成，有的可以省略；
- scheme 叫“方案名”或者“协议名”，表示资源应该使用哪种协议来访问；
- “host:port”表示资源所在的主机名和端口号;
- path 标记资源所在的位置；
- query 表示对资源附加的额外要求；
- 在 URI 里对“**@&/”等特殊字符和汉字必须要做编码，否则服务器收到 HTTP 报文后会无法正确处理**



## 2 常见方法

- **GET**：主要的获取信息方法，大量的性能优化都针对该方法，**幂等方法**
- **HEAD**：类似 GET 方法，但服务器不发送 BODY，用以获取 HEAD 元数据，**幂等方法**
- **POST**：常用于提交 HTML FORM 表单、新增资源等
- **PUT**：更新资源，带条件时是**幂等方法** 
- **DELETE**：删除资源，**幂等方法** 
- **CONNECT**：建立 tunnel 隧道 
- **OPTIONS**：显示服务器对访问资源支持的方法，幂等方法 
- **TRACE**：回显服务器收到的请求，用于定位问题。有安全风险（**已不使用**）



## 3 HTTP Code

### 3.1 分类

RFC 标准把状态码分成了五类，用数字的第一位表示分类:

- **1××**：**请求已接收到，需要进一步处理才能完成，HTTP1.0 不支持**；
- **2××**：**成功**，报文已经收到并被正确处理；
- **3××**：**重定向**，资源位置发生变动，需要客户端重新发送请求;
- **4××**：**客户端错误**，请求报文有误，服务器无法处理;
- **5××**：**服务器错误**，服务器在处理请求时内部发生了错误

### 3.2 1xx

- **100 Continue**：**上传大文件前使用**
- **101 Switch Protocols**：**协议升级使用** ,由客户端发起请求中携带 Upgrade: 头部触发，如升级 websocket 或者 http/2.0

### 3.3 2xx

- **200 OK**:是最常见的成功状态码，表示一切正常，服务器如客户端所期望的那样返回了处理结果，如果是非 HEAD请求，通常在响应头后都会有 body 数据
- **204 No Content**:是另一个很常见的成功状态码，它的含义**与“200 OK”基本相同，但响应头后没有 body 数据**
- **206 Partial Content**：使用 **range 协议时返回部分响应内容时的响应码**，状态码 206 通常还会伴随着头字段“**Content-Range**”，表示响应报文里 body 数据的具体范围，供客户端确认，例如“Content-Range: bytes 0-99/2000”，意思是此次获取的是总计 2000 个字节的前 100 个字节。



