# 网络命令

## 1 netstat

Netstat 命令用于显示各种网络相关信息，如网络连接，路由表，接口状态 (Interface Statistics)，masquerade连接，多播成员 (Multicast Memberships) 等等。

### 1.1 常见参数

```shell
常见参数
-a (all)显示所有选项，默认不显示LISTEN相关
-t (tcp)仅显示tcp相关选项
-u (udp)仅显示udp相关选项
-n 拒绝显示别名，能显示数字的全部转化成数字。
-l 仅列出有在 Listen (监听) 的服務状态

-p 显示建立相关链接的程序名
-r 显示路由信息，路由表
-e 显示扩展信息，例如uid等
-s 按各个协议进行统计
-c 每隔一个固定时间，执行该netstat命令。

提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到
```

### 1.2 列出所有tcp端口

```shell
ken@Ken:~$ netstat -ant
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 0.0.0.0:139             0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:63342         0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:39345         0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:445             0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:6942          0.0.0.0:*               LISTEN     
tcp        0      1 192.168.31.82:38316     172.217.160.110:443     SYN_SENT   
tcp      769      0 127.0.0.1:49030         127.0.1.1:139           CLOSE_WAIT 
tcp        1      0 192.168.31.82:57578     59.110.185.117:80       CLOSE_WAIT 
tcp        0      1 192.168.31.82:38312     172.217.160.110:443     SYN_SENT   
tcp        0      1 192.168.31.82:38306     172.217.160.110:443     SYN_SENT   
tcp        1      0 192.168.31.82:57580     59.110.185.117:80       CLOSE_WAIT 
tcp        0      1 192.168.31.82:38314     172.217.160.110:443     SYN_SENT   
tcp        0      1 192.168.31.82:38308     172.217.160.110:443     SYN_SENT   
tcp        0      1 192.168.31.82:38310     172.217.160.110:443     SYN_SENT   
tcp6       0      0 :::139                  :::*                    LISTEN     
tcp6       0      0 ::1:631                 :::*                    LISTEN     
tcp6       0      0 :::445                  :::*                    LISTEN  
```



### 1.3 列出所有udp端口

```shell
ken@Ken:~$ netstat -anu
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
udp        0      0 0.0.0.0:4500            0.0.0.0:*                          
udp   183296      0 224.0.0.251:5353        0.0.0.0:*                          
udp   184064      0 224.0.0.251:5353        0.0.0.0:*                          
udp     4352      0 0.0.0.0:68              0.0.0.0:*                          
udp   251136      0 192.168.31.255:137      0.0.0.0:*                          
udp    66816      0 192.168.31.82:137       0.0.0.0:*                          
udp   281856      0 0.0.0.0:137             0.0.0.0:*                          
udp   311296      0 192.168.31.255:138      0.0.0.0:*                          
udp      704      0 192.168.31.82:138       0.0.0.0:*                          
udp   311296      0 0.0.0.0:138             0.0.0.0:*                          
udp        0      0 0.0.0.0:500             0.0.0.0:*                          
udp6       0      0 :::4500                 :::*                               
udp6       0      0 :::500                  :::*                               
```

### 1.4 列出监听状态的tcp请求

```shell
ken@Ken:~$ netstat -lt
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 0.0.0.0:netbios-ssn     0.0.0.0:*               LISTEN     
tcp        0      0 localhost:63342         0.0.0.0:*               LISTEN     
tcp        0      0 localhost:39345         0.0.0.0:*               LISTEN     
tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:microsoft-ds    0.0.0.0:*               LISTEN     
tcp        0      0 localhost:6942          0.0.0.0:*               LISTEN     
tcp6       0      0 [::]:netbios-ssn        [::]:*                  LISTEN     
tcp6       0      0 ip6-localhost:ipp       [::]:*                  LISTEN     
tcp6       0      0 [::]:microsoft-ds       [::]:*                  LISTEN 
```

### 1.5 显示进程pid和名称

```shell
ken@Ken:~$ netstat -np|more
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp      769      0 127.0.0.1:49030         127.0.1.1:139           CLOSE_WAIT  7870/gvfsd-smb-brow 
tcp        0      0 192.168.31.82:52796     54.187.241.135:443      ESTABLISHED 68041/java          
tcp        0      1 192.168.31.82:38342     172.217.160.110:443     SYN_SENT    106287/chrome --typ 
tcp        0      1 192.168.31.82:34610     18.200.1.33:7           SYN_SENT    68041/java          
tcp        0      1 192.168.31.82:38338     172.217.160.110:443     SYN_SENT    106287/chrome --typ 
tcp        0      1 192.168.31.82:38336     172.217.160.110:443     SYN_SENT    106287/chrome --typ 
tcp        0      1 192.168.31.82:38344     172.217.160.110:443     SYN_SENT    106287/chrome --typ 
tcp        0      1 192.168.31.82:38334     172.217.160.110:443     SYN_SENT    106287/chrome --typ 
tcp        0      1 192.168.31.82:38340     172.217.160.110:443     SYN_SENT    106287/chrome --typ 

```



## 2 tcpdump

## 3 lsof

